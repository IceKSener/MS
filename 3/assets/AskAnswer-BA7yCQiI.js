import{_ as w,g as h,r as v,a as y,o as m,c as g,b as a,w as k,v as b,n as i,u as c,F as q,d as $,t as A,e as C,f as S}from"./index-D1t46wQ3.js";const B={class:"chat"},F={class:"quetion"},L={__name:"AskAnswer",setup(M){let d=h().proxy.config,o=h().proxy.screen,n=0;const u=v([]),l=v(""),_=r=>new Promise(e=>setTimeout(e,r));async function f(){if(!d.loginStatus.isLogged){S.emit("startLogin");return}let r=v({quetion:l.value.trim(),text:""}),e=!1;++n;let t="";l.value.trim().length<=0?fetch("https://api.shadiao.pro/chp").then(p=>p.json()).then(p=>{t=`(w´ω｀w)
`+p.data.text,e=!0}):(t="你问我："+l.value+`?
我想想......`,setTimeout(()=>{t+=`
我不知道，我只知道$\\int_{${-n}}^{${n}}${n==1?"":n}x^2\\,dx=${(2*n**4/3).toFixed(2)}$
`,t+="(已经实现异步分段显示)",e=!0},3e3)),u.value.push(r),console.log(u.value),console.log(d.settings.charPerSecond);let s=0;for(;;){if(s<t.length)r.value.text+=t.at(s),++s;else if(e)break;await _(1e3/d.settings.charPerSecond)}}function x(){u.value.length=0}return(r,e)=>{const t=y("Markdown");return m(),g("div",{class:i(["area",c(o).type])},[a("div",{class:i(["request",c(o).type])},[k(a("textarea",{type:"text",class:i(["requestbox",c(o).type]),"onUpdate:modelValue":e[0]||(e[0]=s=>l.value=s),placeholder:"你想问啥，不问也行"},null,2),[[b,l.value]]),a("div",{class:i(["submit",c(o).type]),onClick:f},"提问",2)],2),a("div",{class:i(["answers",c(o).type])},[a("div",null,[a("button",{onClick:x},"清空")]),(m(!0),g(q,null,$(u.value,s=>(m(),g("div",B,[a("div",F,A(s.value.quetion),1),C(t,{class:"answer",md:s.value.text},null,8,["md"])]))),256))],2)],2)}}},T=w(L,[["__scopeId","data-v-7b970061"]]);export{T as default};
